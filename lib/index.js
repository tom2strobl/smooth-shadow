"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,n){return((A(r,n)*e+B(r,n))*e+C(r))*e}function getSlope(e,r,n){return 3*A(r,n)*e*e+2*B(r,n)*e+C(r)}function binarySubdivide(e,r,n,t,i){var o;let a,l=0;for(;0<(o=calcBezier(a=r+(n-r)/2,t,i)-e)?n=a:r=a,Math.abs(o)>SUBDIVISION_PRECISION&&++l<SUBDIVISION_MAX_ITERATIONS;);return a}function newtonRaphsonIterate(r,n,t,i){for(let e=0;e<NEWTON_ITERATIONS;++e){var o=getSlope(n,t,i);if(0===o)return n;n-=(calcBezier(n,t,i)-r)/o}return n}function LinearEasing(e){return e}function bezier(a,r,l,n){if(!(0<=a&&a<=1&&0<=l&&l<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===r&&l===n)return LinearEasing;const S=new(float32ArraySupported?Float32Array:Array)(kSplineTableSize);for(let e=0;e<kSplineTableSize;++e)S[e]=calcBezier(e*kSampleStepSize,a,l);return function(e){return 0===e||1===e?e:calcBezier(function(e){let r=0,n=1;for(var t=kSplineTableSize-1;n!==t&&S[n]<=e;++n)r+=kSampleStepSize;--n;var i=(e-S[n])/(S[n+1]-S[n]),o=getSlope(i=r+i*kSampleStepSize,a,l);return o>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(e,i,a,l):0===o?i:binarySubdivide(e,r,r+kSampleStepSize,a,l)}(e),r,n)}}const lerp=(e,r,n)=>e*(1-n)+r*n,clamp=(e,r=0,n=1)=>Math.min(n,Math.max(r,e)),invlerp=(e,r,n)=>clamp((n-e)/(r-e)),roundPixel=e=>Math.round(10*e)/10,roundTransparency=e=>Math.round(1e3*e)/1e3,getSmoothShadow=e=>{var r={distance:100,intensity:.4,sharpness:.7,color:[0,0,0],lightPosition:[-.35,-.5]},n=e?.distance||r.distance,t=e?.intensity||r.intensity,i=e?.sharpness||r.sharpness;const o=e?.color||r.color;var e=e?.lightPosition||r.lightPosition,r=clamp(2*n,0,2e3),n=clamp(t,0,1),t=clamp(i,0,1),i=invlerp(1,2e3,r),a=bezier(.25,1-i,.5,1);const l=Math.round(24*a(i)),S=bezier(0,.3,0,.06)(i)/i*6.5/24*n,p=bezier(0,1,.8,.5),c=r*(-1*e[0]),u=r*(-1*e[1]);a=lerp(200,500,i);const s=lerp(100,a,t);n=bezier(1,0,1,0),r=lerp(0,2,n(1-t));const I=bezier(1,r,1,r);e=lerp(0,.075,1-t);const f=bezier(1,e,1,e);return Array.from(Array(l)).map((e,r)=>{var n=p(r/l),t=f(r/l),r=I(r/l),i=roundPixel(c*t),t=roundPixel(u*t),r=roundPixel(s*r),n=roundTransparency(S*n);return`${i}px ${t}px ${r}px rgba(${o[0]},${o[1]},${o[2]},${n})`}).join(", ")};exports.getSmoothShadow=getSmoothShadow;
//# sourceMappingURL=index.js.map
